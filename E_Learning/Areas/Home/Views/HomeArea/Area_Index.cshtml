@* @addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
 *@
@using E_Learning.Areas.Home.Models


@* @model List<CourseCardDetails> *@


@model IEnumerable<Course>

@{
    Layout = "_Layout";

}

<partial name="_CourseList" data="@Model" />

@section Scripts
{
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        $(document).ready(function () {
            // Handle Add to Cart
            $(".add-to-cart").click(function (e) {
                e.preventDefault();
                var courseId = $(this).data("course-id");

                $.ajax({
                    url: "@Url.Action("AddToCart", "Cart", new { Area = "Payment" })",
                    type: "POST",
                    data: { courseId: courseId },
                    success: function (response) {
                        console.log("CCCCCCCCCCCCCCCC")
                       // $("#cartSummary").html(response.cartSummary);
                        $("#courseList").html(response.courseList);
                    },
                    error: function () {
                        alert("An error occurred while adding the course to the cart.");
                    }
                });
            });

            // Handle Remove from Cart
            $(".remove-from-cart").click(function (e) {
                e.preventDefault();
                var courseId = $(this).data("course-id");

                $.ajax({
                    url: "@Url.Action("RemoveFromCart", "Cart", new { Area = "Payment" })",
                    type: "POST",
                    data: { courseId: courseId },
                    success: function (response) {
                        //console.log("CCCCCCCCCCCCCCCC")
                        // Update the cart summary and the course list with the updated buttons
                        $("#cartSummary").html(response.cartSummary);
                        $("#courseList").html(response.courseList);
                    },
                    error: function () {
                        alert("An error occurred while removing the course from the cart.");
                    }
                });
            });
        });
    </script>


}